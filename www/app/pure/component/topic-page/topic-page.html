<div class="container my-2" ng-if="!$ctrl.topic">
	
</div>
<div class="container my-2" ng-if="$ctrl.topic">
	<h3>
		<user-status class="mr-2" user="$ctrl.topic.user"></user-status>
		<span ng-bind="$ctrl.topic.user.name"></span>
	</h3>
	<h4 ng-bind="$ctrl.topic.name"></h4>
	<hr>
	<div class="row">
		<div class="col-8 col-sm-5 col-md-4">
			<span ng-if="$ctrl.sessions.current == $ctrl.topic" class="btn btn-outline-secondary d-block my-1" ng-click="$ctrl.sessions.close()">End Session</span>
			<div ng-if="$ctrl.sessions.current != $ctrl.topic" ng-switch="$ctrl.topic.user.status">
				<span ng-switch-when="available" class="btn btn-primary d-block my-1" ng-click="$ctrl.sessions.request($ctrl.topic)">Start Session</span>
				<span ng-switch-default class="btn btn-outline-primary d-block my-1" ng-click="$ctrl.showSchedule = true">View Schedule</span>
			</div>
			<topic-rate topic="$ctrl.topic"></topic-rate>
			<div ng-switch="$ctrl.topic.user.status">
				<b ng-switch-when="available" class="text-success">Available now!</b>
				<span ng-switch-when="busy" class="text-muted">Busy</span>
				<span ng-switch-when="offline" class="text-muted">Offline</span>
			</div>
			<span class="d-sm-none">
				<div class="my-2" ng-bind="$ctrl.topic.blurb"></div>
			</span>
			<div ng-if="$ctrl.topic.user.interests.length">
				<hr>
				<h5>Interest<span ng-if="$ctrl.topic.user.sharedInterests.length != 1">s</span>:</h5>
				<interest-tag ng-repeat="interest in $ctrl.topic.user.interests" ng-if="$ctrl.isShared(interest)" interest="interest"></interest-tag>
				<div class="text-muted" ng-repeat="interest in $ctrl.topic.user.interests" ng-if="!$ctrl.isShared(interest)" ng-bind="interest"></div>
			</div>
		</div>
		<div class="d-none d-sm-block col-sm-4 col-md-6">
			<div class="my-2" ng-bind="$ctrl.topic.blurb"></div>
		</div>
		<div class="col-4 col-sm-3 col-md-2">
			<topic-badges topic="$ctrl.topic"></topic-badges>
		</div>
	</div>
</div>